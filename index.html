<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üëæ</text></svg>">
<title>–û—Ü–µ–Ω–∫–∞ —Å–∫–∏–Ω–æ–≤</title>
<style>
  :root{
    --bg:#0e0e12; --card:#14141a; --accent:#8a2be2; --text:#eaeaf2; --muted:#9aa0b2; --radius:16px;
  }
  * { box-sizing: border-box; }
  body{ margin:0; font-family:'Inter',Arial,Helvetica,sans-serif; background:var(--bg); color:var(--text); padding:20px; }
  .wrap{ max-width:1400px; margin:0 auto; }
  
  /* HEADER */
  header{ display:flex; align-items:center; gap:16px; margin-bottom:32px; flex-wrap:wrap; padding-bottom:20px; border-bottom:1px solid rgba(255,255,255,0.05); }
  header .logo-section{ display:flex; align-items:center; gap:12px; }
  header .logo-section img{ height:40px; width:auto; }
  header h1{ font-size:1.8rem; font-weight:800; margin:0; letter-spacing:-0.5px; background: linear-gradient(45deg, #fff, var(--accent)); -webkit-background-clip: text; -webkit-text-fill-color: transparent; }
  header .nav{ margin-left:auto; display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
  
  /* BUTTONS */
  .btn{ background:var(--accent); color:#fff; padding:10px 18px; border-radius:8px; text-decoration:none; font-weight:700; cursor:pointer; border:none; transition: all 0.3s ease; font-size:0.95rem; display:inline-flex; align-items:center; justify-content:center; }
  .btn:hover{ transform: translateY(-2px); box-shadow: 0 4px 12px rgba(138,43,226,0.4); background:#7b1fe0; }
  .btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }
  .btn-secondary{ background:#1f1f28; border: 1px solid rgba(255,255,255,0.08); }
  .btn-secondary:hover{ background:#2a2a35; box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
  
  /* ADMIN FORM */
  .admin-form{ margin-bottom:32px; padding:24px; background:rgba(20, 20, 26, 0.6); border:1px solid rgba(138,43,226,0.2); border-radius:var(--radius); backdrop-filter: blur(10px); }
  .admin-form h3{ margin:0 0 16px 0; font-size:1.2rem; color:var(--accent); font-weight:800; }
  .admin-form .form-row{ display:flex; gap:10px; flex-wrap:wrap; align-items:flex-end; }
  .admin-form input[type="text"]{ flex:1; min-width:200px; padding:12px 14px; border-radius:8px; border:1px solid rgba(255,255,255,0.08); background:#0e0e12; color:var(--text); font-size:0.95rem; transition: all 0.3s ease; }
  .admin-form input[type="text"]:focus{ outline:none; border-color:var(--accent); box-shadow:0 0 0 3px rgba(138,43,226,0.1); }
  
  .file-label{ display:inline-flex; align-items:center; padding:10px 14px; background:#1a1a22; border-radius:8px; cursor:pointer; border:1px solid rgba(255,255,255,0.08); transition: all 0.3s ease; font-size:0.9rem; font-weight:600; }
  .file-label:hover{ border-color: var(--accent); color: #fff; }
  
  .dropzone{ border:2px dashed rgba(138,43,226,0.3); border-radius:12px; padding:30px; text-align:center; background:rgba(138,43,226,0.03); cursor:pointer; transition:all 0.3s; margin-top:16px; }
  .dropzone:hover, .dropzone.dragover{ background:rgba(138,43,226,0.1); border-color:var(--accent); }
  .dropzone-text{ color:var(--muted); font-size:0.9rem; }

  .upload-progress{ margin-top:12px; display:none; }
  .progress-bar{ width:100%; height:6px; background:rgba(255,255,255,0.1); border-radius:8px; overflow:hidden; }
  .progress-fill{ height:100%; width:0%; background:var(--accent); transition:width 0.3s; border-radius:8px; }
  .preview-mini{ margin-top:12px; width:60px; height:60px; background:#0a0a0f; border-radius:8px; display:none; overflow:hidden; border: 1px solid rgba(255,255,255,0.1); }
  .preview-mini img{ width:100%; height:100%; object-fit:cover; }
  
  /* CONTROLS */
  .controls{ display:flex; gap:12px; margin-bottom:24px; align-items:center; flex-wrap:wrap; }
  .controls select, .controls input[type="text"]{ background:#1a1a22; color:var(--text); border:1px solid rgba(255,255,255,0.08); border-radius:8px; padding:10px 14px; font-size:0.9rem; cursor:pointer; font-weight:500; transition: all 0.2s ease; }
  .controls input[type="text"]{ width:240px; }
  .controls input[type="text"]:focus{ border-color:var(--accent); outline:none; }
  .cache-section{ margin-left:auto; display:flex; align-items:center; gap:10px; font-size:0.8rem; color:var(--muted); }

  /* GALLERY GRID */
  .gallery{ display:grid; grid-template-columns:repeat(auto-fill, minmax(240px, 1fr)); gap:20px; }
  
  /* SKIN CARD (RZT Style) */
  .skin-card{ background:var(--card); border-radius:var(--radius); overflow:hidden; border:1px solid rgba(255,255,255,0.04); cursor:pointer; transition: all 0.3s ease; display:flex; flex-direction:column; position:relative; text-decoration:none; color:inherit; }
  .skin-card:hover{ transform: translateY(-6px); box-shadow: 0 12px 30px rgba(0,0,0,0.5); border-color: rgba(138,43,226,0.3); }
  
  .skin-preview{ width:100%; aspect-ratio:1/1; background:#121215; position:relative; overflow:hidden; }
  .skin-preview img{ width:100%; height:100%; object-fit:cover; image-rendering: pixelated; transition: transform 0.5s ease; }
  .skin-card:hover .skin-preview img { transform: scale(1.05); }
  
  .skin-info{ padding:14px; display:flex; flex-direction:column; gap:4px; }
  .skin-name{ font-weight:700; font-size:1rem; color:#fff; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; margin:0; }
  .skin-author{ color:var(--muted); font-size:0.85rem; margin-bottom:10px; }
  
  /* BADGES */
  .card-stats-overlay { position: absolute; bottom: 10px; left: 10px; background: rgba(0,0,0,0.7); backdrop-filter: blur(4px); padding: 4px 8px; border-radius: 6px; font-size: 11px; font-weight: 600; color: #fff; display: flex; gap: 6px; pointer-events:none; }
  
  .card-footer { margin-top:auto; display:flex; justify-content:space-between; align-items:center; }
  .score-badge { width: 32px; height: 32px; border-radius: 50%; background: #3d5afe; color: #fff; display: flex; align-items: center; justify-content: center; font-size: 12px; font-weight: 800; box-shadow: 0 2px 8px rgba(61, 90, 254, 0.4); }
  
  .play-btn { width: 32px; height: 32px; background: rgba(255,255,255,0.06); border-radius: 8px; display: flex; align-items: center; justify-content: center; transition: 0.2s; }
  .skin-card:hover .play-btn { background: var(--accent); color: #fff; }

  .empty-msg{ grid-column:1/-1; text-align:center; padding:60px; color:var(--muted); font-size:1.1rem; }
  .hidden{ display:none !important; }
  
  /* SKELETON */
  .skeleton{ background:linear-gradient(90deg, #1a1a22 25%, #242430 50%, #1a1a22 75%); background-size:200% 100%; animation:shimmer 1.5s infinite; width:100%; height:100%; }
  @keyframes shimmer{ 0%{background-position:200% 0;} 100%{background-position:-200% 0;} }
  
  /* MODAL */
  #infoModal { display:none; position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.8); z-index:1000; align-items:center; justify-content:center; backdrop-filter:blur(5px); }
  .modal-content { background:var(--card); border-radius:16px; padding:30px; max-width:600px; width:90%; max-height:90vh; overflow-y:auto; border:1px solid rgba(255,255,255,0.1); position:relative; }
  .close-modal { position:absolute; top:20px; right:20px; background:none; border:none; color:var(--text); font-size:24px; cursor:pointer; }

  @media (max-width:640px){ 
    .gallery{ grid-template-columns:repeat(2, 1fr); gap:12px; }
    .controls input[type="text"]{ width:100%; order:3; margin-top:10px; }
    .cache-section{ width:100%; justify-content:space-between; order:4; margin-top:10px; }
  }
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="logo-section">
        <a href="https://t.me/MeatMakers" target="_blank" style="display:flex; align-items:center; text-decoration:none;">
          <!-- –õ–æ–≥–æ—Ç–∏–ø, –µ—Å–ª–∏ –µ—Å—Ç—å -->
           <span style="font-size:24px; margin-right:8px;">üëæ</span>
        </a>
        <h1>MMM Skins</h1>
      </div>
      <div class="nav">
        <a href="results-1.html" class="btn btn-secondary">üèÜ –ò—Ç–æ–≥–∏</a>
        <button id="infoBtn" class="btn btn-secondary">‚ÑπÔ∏è –ò–Ω—Ñ–æ</button>
        <button id="signBtn" class="btn">–í–æ–π—Ç–∏</button>
      </div>
    </header>

    <!-- –ü–∞–Ω–µ–ª—å –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ -->
    <div id="adminWrap" class="admin-form hidden">
      <h3>–î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Å–∫–∏–Ω</h3>
      <div class="form-row">
        <input id="skinName" type="text" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Å–∫–∏–Ω–∞" maxlength="50">
        <input id="skinAuthor" type="text" placeholder="–ù–∏–∫ –∞–≤—Ç–æ—Ä–∞" maxlength="50">
        <label class="file-label" tabindex="0">
           üìÇ –í—ã–±—Ä–∞—Ç—å —Ñ–∞–π–ª <input id="fileInput" type="file" accept=".png,.jpg,.jpeg" style="display:none">
        </label>
        <button id="addBtn" class="btn">–ó–∞–≥—Ä—É–∑–∏—Ç—å</button>
        <span id="adminMsg" style="margin-left:8px; font-size:0.9rem; color:var(--accent);"></span>
      </div>
      
      <div class="dropzone" id="dropzone">
        <div class="dropzone-text">–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª —Å–∫–∏–Ω–∞ —Å—é–¥–∞ (PNG/JPG)</div>
      </div>
      
      <div class="preview-mini" id="previewMini"><img id="previewImg" alt=""></div>
      
      <div class="upload-progress" id="uploadProgress">
        <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
        <div style="margin-top:4px; font-size:0.8rem; color:var(--muted);" id="progressText">–ó–∞–≥—Ä—É–∑–∫–∞: 0%</div>
      </div>
    </div>

    <!-- –§–∏–ª—å—Ç—Ä—ã –∏ –ü–æ–∏—Å–∫ -->
    <div class="controls">
      <select id="sortSelect">
        <option value="date">üìÖ –ù–æ–≤—ã–µ —Å–≤–µ—Ä—Ö—É</option>
        <option value="rating">‚≠êÔ∏è –õ—É—á—à–∏–µ —Å–≤–µ—Ä—Ö—É</option>
      </select>
      
      <input type="text" id="searchInput" placeholder="üîç –ù–∞–π—Ç–∏ –ø–æ –∞–≤—Ç–æ—Ä—É –∏–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏—é...">
      
      <div class="cache-section">
        <span id="cacheIndicator">–ê–∫—Ç—É–∞–ª—å–Ω–æ</span>
        <button id="refreshBtn" class="btn btn-secondary" style="padding:6px 10px; font-size:12px;">–û–±–Ω–æ–≤–∏—Ç—å</button>
      </div>
    </div>

    <!-- –ì–∞–ª–µ—Ä–µ—è -->
    <div id="gallery" class="gallery">
      <!-- –°–∫–µ–ª–µ—Ç–æ–Ω—ã –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ -->
      <div class="skin-card" style="height:320px; pointer-events:none;"><div class="skeleton"></div></div>
      <div class="skin-card" style="height:320px; pointer-events:none;"><div class="skeleton"></div></div>
      <div class="skin-card" style="height:320px; pointer-events:none;"><div class="skeleton"></div></div>
      <div class="skin-card" style="height:320px; pointer-events:none;"><div class="skeleton"></div></div>
    </div>
  </div>

  <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –ò–Ω—Ñ–æ -->
  <div id="infoModal">
    <div class="modal-content">
      <button class="close-modal" id="closeModal">√ó</button>
      <h2 style="color:var(--accent); margin-top:0;">–ö–∞–∫ –º—ã –æ—Ü–µ–Ω–∏–≤–∞–µ–º?</h2>
      <p>–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º 90-–±–∞–ª–ª—å–Ω—É—é —à–∫–∞–ª—É RZT, –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é –ø–æ–¥ —Å–∫–∏–Ω—ã.</p>
      <ul style="line-height:1.6; padding-left:20px; color:#ccc;">
        <li><strong>–õ–∞–π–Ω / –û–±—Ä–∞–∑ (10)</strong>: –ò–¥–µ—è –∏ –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è.</li>
        <li><strong>–ü–∞–ª–∏—Ç—Ä–∞ (10)</strong>: –ü–æ–¥–±–æ—Ä –∏ —Å–æ—á–µ—Ç–∞–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤.</li>
        <li><strong>–¢–µ—Ö–Ω–∏–∫–∞ (10)</strong>: –ö–∞—á–µ—Å—Ç–≤–æ –∏—Å–ø–æ–ª–Ω–µ–Ω–∏—è, —à–µ–π–¥–∏–Ω–≥.</li>
        <li><strong>–°—Ç–∏–ª—å (10)</strong>: –£–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å –∞–≤—Ç–æ—Ä–∞.</li>
      </ul>
      <p style="color:var(--muted); font-size:0.9rem;">–ò—Ç–æ–≥–æ–≤—ã–π –±–∞–ª–ª —É–º–Ω–æ–∂–∞–µ—Ç—Å—è –Ω–∞ –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç "–í–∞–π–±–∞" (–¥–æ 2.0x).</p>
    </div>
  </div>

  <script type="module">
    // 1. FIREBASE IMPORTS
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
    import { getFirestore, collection, addDoc, onSnapshot, query, orderBy, serverTimestamp, getDocs, where, doc, setDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";
    import { getAuth, onAuthStateChanged, signInWithPopup, signOut, GoogleAuthProvider } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js";
    import { getStorage, ref, uploadBytesResumable, getDownloadURL } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-storage.js";

    // 2. CONFIGURATION (–í–°–¢–ê–í–¨–¢–ï –°–í–û–ò –î–ê–ù–ù–´–ï –ï–°–õ–ò –û–ù–ò –û–¢–õ–ò–ß–ê–Æ–¢–°–Ø)
    const firebaseConfig = {
      apiKey: "AIzaSyBTClf2FpsEGwBBP6hFNFV2Zn8DordYLkA",
      authDomain: "skinsrzt.firebaseapp.com",
      projectId: "skinsrzt",
      storageBucket: "skinsrzt.appspot.com",
      messagingSenderId: "1084042281569",
      appId: "1:1084042281569:web:25872944cf7dac7fd66020"
    };

    // 3. INIT
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const auth = getAuth(app);
    const storage = getStorage(app);

    const ADMIN_EMAIL = "nmprokhorov@gmail.com"; // Email –∞–¥–º–∏–Ω–∞
    
    // 4. DOM ELEMENTS
    const adminWrap = document.getElementById('adminWrap');
    const skinName = document.getElementById('skinName');
    const skinAuthor = document.getElementById('skinAuthor');
    const fileInput = document.getElementById('fileInput');
    const addBtn = document.getElementById('addBtn');
    const adminMsg = document.getElementById('adminMsg');
    const gallery = document.getElementById('gallery');
    const sortSelect = document.getElementById('sortSelect');
    const signBtn = document.getElementById('signBtn');
    const refreshBtn = document.getElementById('refreshBtn');
    const searchInput = document.getElementById('searchInput');
    const dropzone = document.getElementById('dropzone');
    
    let currentUser = null;
    let allSkinsData = []; // –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–ª—è –ø–æ–∏—Å–∫–∞

    // 5. AUTH LOGIC
    const provider = new GoogleAuthProvider();
    
    signBtn.addEventListener('click', async () => {
      if (!currentUser) {
        try { await signInWithPopup(auth, provider); } catch(e){ alert(e.message); }
      } else {
        await signOut(auth);
      }
    });

    onAuthStateChanged(auth, user => {
      currentUser = user;
      signBtn.textContent = user ? '–í—ã–π—Ç–∏' : '–í–æ–π—Ç–∏';
      // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∞–¥–º–∏–Ω–∫—É —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ email —Å–æ–≤–ø–∞–¥–∞–µ—Ç
      if (user && user.email === ADMIN_EMAIL) {
        adminWrap.classList.remove('hidden');
      } else {
        adminWrap.classList.add('hidden');
      }
    });

    // 6. UPLOAD LOGIC
    fileInput.addEventListener('change', handleFileSelect);
    
    function handleFileSelect(e) {
        const file = e.target.files[0];
        if (file) {
            const reader = new FileReader();
            reader.onload = (ev) => {
                document.getElementById('previewImg').src = ev.target.result;
                document.getElementById('previewMini').style.display = 'block';
            }
            reader.readAsDataURL(file);
        }
    }

    addBtn.addEventListener('click', async () => {
      if (!currentUser) return;
      const file = fileInput.files[0];
      const nameVal = skinName.value.trim();
      const authorVal = skinAuthor.value.trim();
      
      if (!file || !nameVal || !authorVal) {
          adminMsg.textContent = "‚ùå –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!";
          return;
      }

      addBtn.disabled = true;
      adminMsg.textContent = "‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...";
      document.getElementById('uploadProgress').style.display = 'block';

      try {
          // –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–∞
          const storageRef = ref(storage, `skins/${Date.now()}_${file.name}`);
          const uploadTask = uploadBytesResumable(storageRef, file);

          uploadTask.on('state_changed', 
            (snapshot) => {
                const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                document.getElementById('progressFill').style.width = progress + '%';
                document.getElementById('progressText').textContent = `–ó–∞–≥—Ä—É–∑–∫–∞: ${Math.round(progress)}%`;
            }, 
            (error) => { throw error; }, 
            async () => {
                // –§–∞–π–ª –∑–∞–≥—Ä—É–∂–µ–Ω, –ø–æ–ª—É—á–∞–µ–º URL –∏ –ø–∏—à–µ–º –≤ –ë–î
                const downloadURL = await getDownloadURL(uploadTask.snapshot.ref);
                
                await addDoc(collection(db, "skins"), {
                    skinName: nameVal,
                    authorName: authorVal,
                    skinUrl: downloadURL,
                    createdAt: serverTimestamp(),
                    views: 0,
                    totalScore: 0
                });

                // –°–±—Ä–æ—Å —Ñ–æ—Ä–º—ã
                skinName.value = '';
                skinAuthor.value = '';
                fileInput.value = '';
                document.getElementById('previewMini').style.display = 'none';
                document.getElementById('uploadProgress').style.display = 'none';
                adminMsg.textContent = "‚úÖ –°–∫–∏–Ω –¥–æ–±–∞–≤–ª–µ–Ω!";
                addBtn.disabled = false;
                setTimeout(() => adminMsg.textContent = '', 3000);
            }
          );
      } catch (e) {
          console.error(e);
          adminMsg.textContent = "‚ùå –û—à–∏–±–∫–∞: " + e.message;
          addBtn.disabled = false;
      }
    });

    // 7. GALLERY LOGIC (REALTIME)
    function renderGallery(data) {
        gallery.innerHTML = '';
        
        if (data.length === 0) {
            gallery.innerHTML = '<div class="empty-msg">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ</div>';
            return;
        }

        data.forEach(skin => {
             const card = document.createElement('a');
             card.href = `skin-view.html?id=${skin.id}`;
             card.className = 'skin-card';
             
             const score = skin.totalScore ? Math.round(skin.totalScore) : '?';
             
             card.innerHTML = `
                <div class="skin-preview">
                    <img src="${skin.skinUrl}" loading="lazy" alt="${skin.skinName}">
                    <div class="card-stats-overlay">
                        <span>üëÅÔ∏è ${skin.views || 0}</span>
                    </div>
                </div>
                <div class="skin-info">
                    <h3 class="skin-name">${skin.skinName}</h3>
                    <div class="skin-author">${skin.authorName}</div>
                    
                    <div class="card-footer">
                         <div class="score-badge">${score}</div>
                         <div class="play-btn">‚ûú</div>
                    </div>
                </div>
             `;
             gallery.appendChild(card);
        });
    }

    // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
    const q = query(collection(db, "skins"), orderBy("createdAt", "desc"));
    onSnapshot(q, (snapshot) => {
        allSkinsData = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
        applyFilters(); // –ü—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–∫—É—â–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö
    });

    // –ü–æ–∏—Å–∫ –∏ –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
    function applyFilters() {
        let result = [...allSkinsData];
        const term = searchInput.value.toLowerCase();
        const sortType = sortSelect.value;

        // –ü–æ–∏—Å–∫
        if (term) {
            result = result.filter(s => 
                (s.skinName && s.skinName.toLowerCase().includes(term)) || 
                (s.authorName && s.authorName.toLowerCase().includes(term))
            );
        }

        // –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞
        if (sortType === 'rating') {
            result.sort((a, b) => (b.totalScore || 0) - (a.totalScore || 0));
        } else {
            // –ü–æ –¥–∞—Ç–µ (—É–∂–µ –æ—Ç—Å–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é Firebase, –Ω–æ –Ω–∞ –≤—Å—è–∫–∏–π —Å–ª—É—á–∞–π)
            // (–¥–ª—è –ø—Ä–æ—Å—Ç–æ—Ç—ã –æ—Å—Ç–∞–≤–ª—è–µ–º –ø–æ—Ä—è–¥–æ–∫ –∫–∞–∫ –ø—Ä–∏—à–µ–ª, —Ç–∞–∫ –∫–∞–∫ –∑–∞–ø—Ä–æ—Å —É–∂–µ —Å orderBy)
        }
        
        renderGallery(result);
    }

    searchInput.addEventListener('input', applyFilters);
    sortSelect.addEventListener('change', applyFilters);
    refreshBtn.addEventListener('click', () => location.reload());

    // Modal Logic
    const infoBtn = document.getElementById('infoBtn');
    const infoModal = document.getElementById('infoModal');
    const closeModalBtn = document.getElementById('closeModal');

    infoBtn.addEventListener('click', () => infoModal.style.display = 'flex');
    closeModalBtn.addEventListener('click', () => infoModal.style.display = 'none');
    infoModal.addEventListener('click', (e) => {
        if (e.target === infoModal) infoModal.style.display = 'none';
    });

  </script>
</body>
</html>
